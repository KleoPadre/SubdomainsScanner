# Subdomain Scanner

Инструмент для поиска поддоменов с использованием различных методов:
- DNS Zone Transfer
- Certificate Transparency Logs
- Брутфорс из словаря

## Установка

```bash
# Клонирование репозитория
git clone https://github.com/KleoPadre/SubdomainsScanner.git
cd SubdomainsScanner

# Установка зависимостей
pip install -r requirements.txt
```

## Использование

```bash
# Базовое использование
python scan_subdomains.py example.com

# С указанием своего словаря
python scan_subdomains.py example.com -w wordlist.txt

# С указанием количества потоков
python scan_subdomains.py example.com -t 20

# С сохранением результатов в другой файл (по умолчанию сохраняется в папку finds)
python scan_subdomains.py example.com -o results.txt

# С подробным выводом
python scan_subdomains.py example.com -v

# С классификацией поддоменов на пользовательские и технические
python scan_subdomains.py example.com -c

# С сохранением классифицированных поддоменов в отдельные файлы
python scan_subdomains.py example.com -c --save-classified
```

Если запустить скрипт без указания домена, он запросит его ввод интерактивно:

```bash
python scan_subdomains.py
```

## Структура проекта

- `scan_subdomains.py` - Основной исполняемый файл
- `subdomain_scanner/` - Пакет со всеми модулями
  - `dns/` - Модули для работы с DNS
    - `zone_transfer.py` - Передача зоны DNS
    - `brute_force.py` - Перебор поддоменов из словаря
  - `cert/` - Модули для работы с сертификатами
    - `certificate_transparency.py` - Поиск через логи прозрачности сертификатов
  - `utils/` - Вспомогательные модули
    - `file_handler.py` - Работа с файлами
    - `logger.py` - Настройка логирования
- `finds/` - Папка для сохранения результатов сканирования
- `wordlists/` - Папка с файлами словарей для перебора поддоменов

## Сохранение результатов

По умолчанию, найденные поддомены сохраняются в файл в папке `finds/` с именем, соответствующим сканируемому домену:
- Например, при сканировании `example.com` результаты будут сохранены в `finds/example_com.txt`
- Вы можете указать свой путь для сохранения с помощью параметра `-o`

### Фильтрация

Для повышения качества результатов, скрипт автоматически фильтрует:
- Поддомены со звездочками (например, `*.example.com`)
- При сохранении в файл используются только обычные поддомены

### Классификация поддоменов

Сканер может автоматически классифицировать найденные поддомены на две категории:

1. **Пользовательские поддомены** - предназначены для конечных пользователей:
   - Основные веб-сайты (www, app, mobile)
   - Сервисы для пользователей (login, account, store)
   - Информационные ресурсы (blog, news, support)

2. **Технические поддомены** - используются для инфраструктуры:
   - CDN и серверы контента (cdn, content, static)
   - Серверы баз данных (db, sql, mongo)
   - Почтовые серверы (mail, smtp, pop)
   - API и серверы мониторинга

Для запуска классификации используйте флаг `-c`:
```bash
python scan_subdomains.py example.com -c
```

Для сохранения классифицированных поддоменов в отдельные файлы:
```bash
python scan_subdomains.py example.com -c --save-classified
```

## Надежность сканирования

Для повышения надежности сканирования используются следующие механизмы:

### Публичные DNS-серверы
Сканер использует набор публичных DNS-серверов для выполнения запросов:
- Google DNS (8.8.8.8, 8.8.4.4)
- Cloudflare DNS (1.1.1.1, 1.0.0.1)
- Яндекс DNS (77.88.8.8, 77.88.8.1)
- Quad9 (9.9.9.9, 149.112.112.112)
- OpenDNS (208.67.222.222, 208.67.220.220)

Это позволяет:
- Избежать проблем с таймаутами при использовании локального DNS
- Повысить точность результатов
- Обеспечить работоспособность сканера в различных сетях

### Устойчивость к ошибкам
Сканер спроектирован с учетом возможных ошибок в сети:
- Автоматические повторные попытки с разными DNS-серверами при таймаутах
- Продолжение сканирования другими методами, даже если один из методов не сработал
- Разумные таймауты для предотвращения зависания
- Случайное перемешивание списка DNS-серверов для распределения нагрузки

## Зависимости

- dnspython - Для работы с DNS
- requests - Для HTTP-запросов
- tqdm - Для отображения прогресса
- aiodns - Для асинхронных DNS-запросов

## Примечания

Если файл словаря не найден, скрипт предложит скачать его автоматически. 